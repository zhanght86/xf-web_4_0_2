<!--<div ui-view="header"></div>-->
<div class="main warp customer-over">
    <div class="page-lrcont210 clearfix bgwhite mt10" style="min-height: 800px;">
        <div class="l-aside fl">
            <div class="aside-hd tac">
                <div style="width:110px;height:110px;overflow: hidden;border-radius:50%;margin:0 auto;border:3px solid #fff;">
                    <img class="hd-img" ng-src="{{$parent.$parent.MASTER.avatarUrl}}{{$parent.MASTER.avatarId}}"/>
                </div>
                <span class="hd-name ellipsis">{{$parent.$parent.MASTER.applicationName}}</span>
            </div>
            <div class="aside-nav aside-navn">
                <ul class="">
                    <li class="type1"  ng-repeat="item in vm.botRoot" data-option-id="{{item.id}}">
                        <a class="slide-a ellipsis" href="javascript:;">
                            <i class="icon-jj ngBotAdd" data-option-id="{{item.id}}"></i>
                            <span data-option-id="{{item.id}}">{{item.name}}</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="sideBotFullPath">
                <ul>
                    <li class="fullpath" ng-repeat="item in vm.selectedBot">
                       {{item}}
                    </li>
                </ul>
            </div>
        </div>
        <div class="r-cont pd30">
            <div class="r-cont-hd">
                <span>客服型场景知识总览</span>
            </div>
            <div class="r-cont-bd">
                <div class="csso-cz-box clearfix mt30 ">
                    <div class="L pr ">
                        <div class="">
                            <div class="L" style="position: relative;">
                                <input type="text" class="input_text L mr-10" ng-model="vm.seekAdvanceParameter.knowledgeTitle" placeholder="请输入知识标题" ng-keypress="vm.keySearch($event)"  />
                                <button class="btn1 btn1_blue L mr-10" ng-click="vm.napSearch()" style="height:31px;font-size:14px;">查找</button>
                                <!--<span ng-click="vm.napSearch()" class="cust_searchTip" ></span>-->
                            </div>
                            <button class="btn se-search-btn L" ng-click="vm.heighSarch=!vm.heighSarch" style="border: 1px solid #3ea9fb;">高级查找</button>
                            <!--<button class="btn1 btn1_blue advanced_sear_btn" ng-click="vm.heighSarch=!vm.heighSarch">高级查找</button>-->
                            <!--<button class="btn1 btn1_blue advanced_sear_btn" ng-click="vm.paramsReset()">重置</button>-->
                        </div>
                        <div class="advanced_search bd" style="background:#fff;width:540px;">
                            <div class="framework mb-10" style="padding-left: 85px;">
                                <span class="framework_s">知识内容:</span>
                                <input type="text" class="input_text" ng-model="vm.seekAdvanceParameter.knowledgeContent"/>
                            </div>
                            <!--<div class="framework mb-10" style="padding-left: 85px;">-->
                                <!--<span class="framework_s">知识扩展问:</span>-->
                                <!--<input type="text" ng-model="vm.seekAdvanceParameter.searchExtension" class="input_text"/>-->
                            <!--</div>-->
                            <div class="framework mb-10" style="padding-left: 85px;">
                                <span class="framework_s">知识有效期：</span>
                                <span>
                                    <input type="text" id="startTime" onchange=""  ng-model="vm.seekAdvanceParameter.knowledgeExpDateStart"  onclick="WdatePicker({startDate:'%y',dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'endTime\')}'})" class="input-text Wdate "  style="width:185px;border:1px solid #e1e1e1;height: 35px;font-size: 15px;color: #333!important;" placeholder="请选择开始日期" readonly>
                                    -
                                    <input type="text" id="endTime"   onchange="" ng-model="vm.seekAdvanceParameter.knowledgeExpDateEnd" onclick="WdatePicker({startDate:'%y',dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'startTime\')}'})" class="input-text Wdate "  style="width:185px;border:1px solid #e1e1e1;height: 35px;font-size: 15px;color: #333!important;" placeholder="请选择结束日期" readonly>
                                </span>
                            </div>
                            <div class="framework mb-10" style="padding-left: 85px;">
                                <span class="framework_s">作者:</span>
                                <input type="text" class="input_text" ng-model="vm.seekAdvanceParameter.knowledgeCreator"/>
                            </div>
                            <div class="framework mb-10" style="padding-left: 85px;">
                                <span class="framework_s">知识来源:</span>
                                <div>
                                    <label class="mr-10"><input type="radio" name="knoe_sources" ng-model="vm.seekAdvanceParameter.sourceType" value="" />全部</label>
                                    <label class="mr-10"><input type="radio" name="knoe_sources" ng-model="vm.seekAdvanceParameter.sourceType" value="120" />单条新增</label>
                                    <label class="mr-10"><input type="radio" name="knoe_sources" ng-model="vm.seekAdvanceParameter.sourceType" value="121" />批量导入</label>
                                    <label class="mr-10"><input type="radio" name="knoe_sources" ng-model="vm.seekAdvanceParameter.sourceType" value="122" />文档加工</label>
                                </div>
                            </div>
                            <div class="framework mb-10" style="padding-left: 85px;">
                                <span class="framework_s">更新时间:</span>
                                <div>
                                    <label class="mr-10"><input type="radio" name="time" ng-model="vm.seekAdvanceParameter.updateTimeType" value="0"/>不限</label>
                                    <label class="mr-10"><input type="radio" name="time" ng-model="vm.seekAdvanceParameter.updateTimeType" value="1"/>近三天</label>
                                    <label class="mr-10"><input type="radio" name="time" ng-model="vm.seekAdvanceParameter.updateTimeType" value="2"/>近七天</label>
                                    <label class="mr-10"><input type="radio" name="time" ng-model="vm.seekAdvanceParameter.updateTimeType" value="3"/>近一月</label>
                                </div>
                            </div>
                            <div class="tc">
                                <input type="button" class="btn1 btn1_blue mr-10" value="搜索" ng-click="vm.napSearch()" />
                                <button class="btn1 btn_green advanced_sear_btn" ng-click="vm.paramsReset()">重置</button>
                            </div>
                        </div>
                    </div>

                    <div class="fr">
                        <select class="sel bd L mr-10" ng-model="vm.newKnowledge" ng-change="vm.jumpToNewKonwledge(vm.newKnowledge)" style="width: 126px;">
                            <option value="false" style="display:none;">单条知识新增</option>
                            <option value="100">FAQ知识新增</option>
                            <option value="101">概念知识新增</option>
                            <option value="102">列表知识新增</option>
                            <option value="103">任务知识新增</option>
                            <!--<option value="104">多轮会话新增</option>-->
                        </select>
                        <a class="L btn btn-blue mr-10" href="javascript:;" ui-sref="knowledgeManagement.knowBatchAdditions" style="line-height:22px;">批量导入</a>
                        <!--<a class="btn btn-green" href="javascript:;" style="line-height:17px;">知识加工</a>-->
                        <button class="btn1 L btn_green"  ng-click="vm.exportExcel()" style="height:31px;font-size:14px;">知识导出</button>

                    </div>
                </div>
                <div class="csso-cont mt30">

                    <div class="clearfix csso-hd">
                        <div class="fl">
                            <span class="L" checkbox-overview ng-click="vm.knowledgeIdList.length==vm.deleteIdList.length?vm.deleteIdList=[]:vm.deleteIdList=$parent.$parent.MASTER.selectAll(vm.knowledgeIdList,0)" result="vm.deleteIdList.length==vm.knowledgeIdList.length&&vm.knowledgeIdList.length"></span>
                            <span class="L"><span>总计<em>{{vm.paginationConf.totalItems}}</em>条数据，今日新增<em>{{vm.newNumber}}</em>条</span></span>
                        </div>
                        <div class="fr"  ng-click="vm.delData(vm.deleteIdList)">
                            <a class="ljtClose-btn" href="javascript:;">
                                <i class="icon-ljtClose"></i>
                                <!--<span style="color:#e84f4f;" >删除</span>-->
                            </a>
                        </div>
                    </div>
                    <div class="clearfix csso-bd " style="min-height:300px;padding-left:15px;">
                        <ul class="csso-lsit">
                            <li ng-repeat="item in vm.listData">
                                <div class="title">
                                    <span checkbox-overview ng-click="vm.deleteIdList.inArray(item.id)?vm.deleteIdList.remove(item.id):vm.deleteIdList.push(item.id)" result="vm.deleteIdList.inArray(item.id)"></span>
                                    <a href="javascript:;" ui-sref="KM.preview({id:item.id,type:item.type})">
                                        {{item.title}}
                                    </a>
                                    <a class="ljtClose-btn" href="javascript:;" style="float: right;margin-right: 15px;cursor: pointer" title="删除"
                                       ng-click="vm.delData([item.id])">
                                        <i class="icon-ljtClose"></i>
                                    </a>
                                </div>
                                <div class="txt-cont mt10">
                                    <div class="txt-item oh">
                                        <p class="lable fl" ng-if="item.type!=104" ng-bind="{100:'用户问法个数：',101:'概念扩展个数：',102:'用户问法个数：',103:'触发问法个数：'}[item.type]+item.extensionSize"></p>
                                    </div>
                                    <div class="txt-item oh">
                                        <div class="lable fl">知识内容：</div>
                                        <div class="value oh">
                                            <ul class="" ng-if="item.contents.length">
                                                <!-- faq -->
                                                <li ng-if="item.type==100" ng-repeat="content in item.contents track by $index">
                                                    <p ng-bind="content.content.length<=50?content.content:content.content.substring(0,50)+'...'"></p>
                                                </li>
                                                <!-- 概念 -->
                                                <li ng-if="item.type==101" ng-repeat="content in item.contents track by $index">
                                                    <p ng-bind="{1010:content.content.length<=50?content.content:content.content.substring(0,50)+'...',1018:'[图片]',1019:'[图文]',1020:'[语音]'}[content.type]"></p>
                                                </li>
                                                <!-- 列表 -->
                                                <li ng-if="item.type==102" title="{{content.content}}" ng-repeat="content in item.contents track by $index">
                                                    <!--<p>{{item.knowledgeContent}}</p>-->
                                                    <p ng-if="content.type==1010">肯定回答：{{content.content.length<=50?content.content:content.content.substring(0,50)+'...'}}</p>
                                                    <p ng-if="content.type==1011">否定回答：{{content.content.length<=50?content.content:content.content.substring(0,50)+'...'}}</p>
                                                </li>
                                                <!-- 要素知識-->
                                                <li ng-if="item.type==103">
                                                    <p ng-repeat="size in item.contents" ng-bind="{1021:'要素个数：',1022:'答案个数：'}[size.type]+size.content+'个'"></p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="txt-item oh">
                                        <div class="lable fl" style="overflow: hidden;width: 100%;">
                                            <p style="float: left">
                                                知识类型：
                                                <span ng-bind="{100:'FAQ知识',101:'概念知识',102:'列表知识',103:'任务知识',104:'多轮对话'}[item.type]"></span>
                                                <span> &nbsp;作者：{{item.account}}</span>
                                            </p>
                                            <p style="float: right">
                                                更新时间：{{item.modifyTime |  date : 'yyyy-MM-dd HH:mm'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <!--<div class="csso-info oh">-->
                                    <!--<div class="fr">-->
                                        <!--<span class="mr-20">作者：{{item.account}}</span>-->
                                        <!--<span>更新时间：{{item.modifyTime |  date : 'yyyy-MM-dd HH:mm'}}</span>-->
                                    <!--</div>-->
                                <!--</div>-->
                            </li>
                        </ul>
                        <pagination ng-if="vm.paginationConf.totalItems && vm.paginationConf.totalItems>0" conf="vm.paginationConf"></pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
