<!--引导页头部遮罩-->
<div class="shadow_div dn" style="height:60px;" ></div>
<!--引导页头部遮罩end-->
<div class="main warp">
    <div class="addContent pd30">
        <div class="cl">
            <div class="r-cont-hd L">
                <span ng-if="!vm.knowledgeId">概念知识新增</span>
                <span ng-if="vm.knowledgeId">概念知识编辑</span>
            </div>
            <a href="javascript:;" class="c_green R" ng-click="vm.showTip();">使用帮助</a>
        </div>
        <!--<auto-complete ng-if="vm.dimensionsCopy" source="vm.dimensionsCopy" result="vm.dimensionArr"></auto-complete>-->
        <div class="r-cont-bd oh pr">
            <!--<form novalidate="novalidate" name="form">-->
            <div class="jqrsz-item">
                <div class="item-line">
                    <div class="lable">
                        知识标题：
                    </div>
                    <div class="value">
                        <div class="ipt-txt-box" style="width:100%;">
                            <input class="ipt-txt bd" type="text" style="height:32px;" ng-model="vm.title" name="title" ng-focus="vm.titleTip=''" ng-minlength="1" ng-maxlength="1000" required />
                            <i class="btn-empty"></i>
                            <a href="javascript:;" title="自动匹配BOT" class="mr-15"  ng-click="vm.getBotByTitle()"><img src="../../../images/match_img.png" width="25" height="25"></a>
                            <p class="c-error pd-5"  ng-if="vm.titleTip">{{vm.titleTip}}</p>
                        </div>
                    </div>
                </div>

                <div class="item-line">
                    <div class="lable">
                        知识有效期：
                    </div>
                    <label style="line-height:32px;">
                        <input style="margin-top: -2px;" type="checkbox" ng-model="vm.isTimeTable"> 启用
                    </label>
                    <div style="margin: 10px 0 10px  232px;" ng-show="vm.isTimeTable">
                        <input type="text" id="startTime" onchange=""  ng-model="vm.timeStart"  onclick="WdatePicker({startDate:'%y',dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'endTime\')}'})" class="input-text Wdate "  style="width:196px;border:1px solid #e1e1e1;height: 35px;font-size: 15px;color: #333!important;" placeholder="yyyy-mm-dd" readonly>
                        -
                        <input type="text" id="endTime"   onchange="" ng-model="vm.timeEnd" onclick="WdatePicker({startDate:'%y',dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'startTime\')}'})" class="input-text Wdate "  style="width:196px;border:1px solid #e1e1e1;height: 35px;font-size: 15px;color: #333!important;" placeholder="yyyy-mm-dd" readonly>
                    </div>
                </div>

                <div class="item-line mb-10">
                    <div class="lable">
                        BOT路径：
                    </div>
                    <div class="value Div clearfix" id="Div">
                        <div class="ipt-txt-box L mr-10">
                            <input class="ipt-txt bd" style="padding-right:25px;width:407px;height:32px;" ng-click="vm.knowledgeBot()" ng-model="vm.knowledgeBotVal" readonly id="ipt-txt" type="text" ng-disabled/>
                            <!--<p class="ipt-txt" id="ipt-txt" >-->
                            <!--<span ng-repeat="item in vm.knowledgeBotVal" >{{item}}<i ng-if="$index!=vm.knowledgeBotVal.length-1">,</i></span>-->
                            <!--</p>-->
                            <i class="btn-menu_1" ng-click="vm.knowledgeBot()"></i>
                            <div class="rootClassfy aside-navs aside-navs2" >
                                <ul class="menus show">
                                    <!--//test-->
                                    <li ng-repeat="item in vm.botRoot track by $index">
                                        <div class="slide-a">
                                            <a class="ellipsis" href="javascript:;">
                                                <i class="icon-jj" data-option="{{item.categoryId}}"></i>
                                                <span>{{item.categoryName}}</span>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <a href="javascript:;" ng-click="vm.botSelectAdd()" class="L mr-15 mt-5" ><img src="../../../images/images/add_img.png" alt=""></a>
                    </div>
                </div>
                <!--bot  标题 点击生成  -->
                <div class="item-line mb-10" ng-if="vm.botClassfy.length" ng-repeat="item in  vm.botClassfy track by $index">
                    <div class="lable"> BOT路径：</div>
                    <div class="value Div clearfix" id="Div">
                        <div class="ipt-txt-box L mr-10">
                            <div class="ipt-txt" style="overflow:hidden;line-height:24px;">
                                <a title="{{item.className.join('/')}}">{{item.className.join("/")}}</a>
                            </div>
                        </div>
                        <a href="javascript:;" class="L mr-10 mt-5"  ng-click="vm.botClassfy.splice($index,1)"><img src="../../../images/images/delete_img.png"  alt=""></a>
                    </div>
                </div>
                 <!--手选生成-->
                <div class="item-line mb-10" ng-if="vm.creatSelectBot.length" ng-repeat="item in  vm.creatSelectBot track by $index">
                    <div class="lable"> BOT路径：</div>
                        <div class="value Div clearfix" id="Div">
                            <div class="ipt-txt-box mr-10 L">
                            <div class="ipt-txt" style="overflow:hidden;line-height:24px;">
                                <a title="{{item.className.join('/')}}">{{item.className.join("/")}}</a>
                            </div>
                        </div>
                        <a href="javascript:;" class="L mr-10 mt-5" ><img src="../../../images/images/delete_img.png" ng-click="vm.creatSelectBot.splice($index,1)" alt=""></a>
                    </div>
                </div>
                <div class="item-line">
                    <div class="row cl mb-10">
                        <div class="lable" style="width:245px;">业务框架：</div>
                        <!--<label class="form-label col-xs-4 col-sm-2 text-r">业务框架：</label>-->
                        <div class="formControls col-xs-8 col-sm-9" style="padding-left:0;">
                            <select class="input-text" style="width:407px;height:34px;"  ng-model="vm.frameId" ng-options="frame.frameId as frame.frameTitle for frame in vm.frames">
                                <option value="" ng-if="vm.frames.length">--请选择以上业务框架--</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jqrsz-item">
                <!--预览内容-->
                <div ng-repeat="(index,item) in vm.scanContent track by $index">
                    <div class="item-line">
                        <div class="lable" style="padding-right:10px;box-sizing:border-box;">
                            内容{{index+1}}:
                        </div>
                        <div class="value">
                            <div class="ipt-txt-box clearfix">
                                <div class="textareaDiv textareaDiv1 textareaDiv2 L" >
                                    <!--<textarea   readonly style="width: 100%;">-->
                                    {{item.knowledgeContent}}
                                    <!--</textarea>-->
                                </div>
                                <!--<a href="javascript:;" ng-click="vm.scanContent.splice($index,1)" class=" mr-15" ><img src="../../../images/images/delete_img.png" alt=""></a>-->
                                <a href="javascript:;" ng-click="vm.scanContent.splice($index,1)" class="delete_a ml-10 L mt-20"></a>
                                <a href="javascript:;" class="edit_a L mt-20 ml-10" ng-click="vm.knowledgeAdd(vm.scanContent[$index],$index)"></a>
                            </div>
                        </div>
                    </div>
                    <div class="item-line" id="item-line">
                        <div class="left"></div>
                        <div class="optionDiv">渠道：
                            <span class="mr-10" ng-repeat="val in item.channelIdList track by $index">{{val | channel:vm.channels}}</span>
                        </div>
                    </div>
                    <div class="item-line" id="item-line">
                        <div class="left"></div>
                        <div class="optionDiv">维度:
                            <span style="margin: 0 4px;" ng-repeat="val in item.dimensionIdList track by $index">{{val | dimension:vm.dimensions}}</span>
                        </div>
                    </div>
                    <!-- 扩展问生成标签-->
                    <div class="item-line" ng-repeat="val in item.extensionByContentByTitle track by $index" style="margin-top: 4px;">
                        <div class="value">
                            <div class="ipt-txt-box">
                                <input class="ipt-txt" type="text"  ng-model="val" name="title" />
                                <i class="btn-empty"></i>
                                <a href="javascript:;"  title="点击生成扩展问" ng-click="vm.getExtension(val,60)" class="mr-15"><img src="../../../images/images/add_img.png" ></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="item-line" style="margin-top: 15px">
                    <div class="lable">
                        知识内容：
                    </div>
                    <div class="value">
                        <div class="ipt-txt-box">
                            <input class="addBth" ng-click="vm.knowledgeAdd()"  type="button" value="+ 新增"/>
                            <i class="btn-empty"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jqrsz-item" style="overflow: visible">
                <div class="item-line"  style="overflow: visible">
                    <div class="lable" >
                        概念扩展：
                    </div>
                    <div class="value" style="overflow: visible">
                        <div class="clearfix" style="width: 500px;height: 34px;">
                            <input type="text " class="L" placeholder="请输入问题" ng-model="vm.extensionTitle" style="padding-left:6px;height: 98%;display: inline-block;width: 321px;border: 1px solid #e1e1e1;border-right: 0;">
                            <select  ng-model="vm.extensionWeight"  class="bd L mr-10" style="display: inline-block;width:84px;height:33px;line-height:33px;">
                                <option value="60">普通</option>
                                <option value="61">否定</option>
                            </select>
                            <a href="javascript:;" class="L mr-15 mt-5" ng-click="vm.getExtension(vm.extensionTitle,vm.extensionWeight);vm.extensionWeight=60"><img src="../../../images/images/add_img.png" alt=""></a>
                        </div>
                    </div>
                </div>
                <!--sshoudong  tinajia -->
                <div class="item-line"  style="overflow: visible" ng-repeat="item in vm.extensions track by $index">
                    <div class="lable">
                        概念扩展：
                    </div>
                    <div class="value clearfix">
                        <div class=" tag_box L mr-10" style="width:353px;padding:0;">
                            <span ng-repeat="val in item.extensionQuestionTagList track by $index" style="margin:0 5px 5px 0;display:inline-block;background: #e1e1e1;padding: 4px;" ng-class="tag.exist?'':'tagRepeat'">
                                {{val.tagName}}
                            </span>
                        </div>
                        <span class="tag_s mr-10 L" style="margin-right:10px;">普通</span>
                        <!--<span class="tag_s mr-10 L">{{item.extensionQuestionType==60?'普通':'否定'}}</span>-->
                        <a href="javascript:;" ng-click="vm.extensions.splice($index,1)" class="L mr-10" ><img src="../../../images/images/delete_img.png" alt="" ></a>
                        <a href="javascript:;" class="L edit_a mr-10 mt-5" ng-click="vm.extensionEdit()"></a>
                        <span class="L" ng-if="item.extensionQuestionTitle"><b>来源于</b> <span>{{item.extensionQuestionTitle}}</span></span>
                    </div>
                </div>

                <!-- 業務框架 生成 -->
                <div class="item-line"  style="overflow: visible" ng-repeat="item in vm.extensionsByFrame track by $index">
                    <div class="lable">
                        概念扩展：
                    </div>
                    <div class="value clearfix">
                        <div class=" tag_box L mr-10" style="width:353px;padding:0;">
                            <!--{{item.extensionQuestionTagList}}-->
                            <span ng-repeat="val in item.extensionQuestionTagList track by $index" style="margin:0 5px 5px 0;display:inline-block;background: #e1e1e1;padding: 4px;" ng-class="val.exist?'':'tagRepeat'">
                                {{val.tagName}}
                            </span>
                        </div>
                        <span class="tag_s L" style="margin-right:10px;">{{item.extensionQuestionType==60?'普通':'否定'}}</span>
                        <a href="javascript:;" ng-click="vm.extensionsByFrame.splice($index,1)" class="L mr-10" ><img src="../../../images/images/delete_img.png" alt="" ></a>
                        <a href="javascript:;" class="L edit_a mr-10 mt-5" ng-click="vm.extensionEdit()"></a>
                        <span class="L" ng-if="item.extensionQuestionTitle"><b>来源于:</b> <span>{{item.extensionQuestionTitle}}</span></span>
                    </div>
                </div>
            </div>
            <div class="jqrsz-btn-box" style="margin-bottom:100px;">
                <input type="button" class="btn btn-blue mr10" value="保存" ng-disabled="vm.limitSave" ng-click="vm.save()">
                <a class="btn btn-gray" href="javascript:;" style="background: #2bcacc; color: #fff;" ng-click="vm.scan()">预览</a>
            </div>
            <!--引导-->
            <div class="shadow_div dn" ></div>
            <div class="step_div " >
                <div class="step_one dn" id="step_one" >
                    <div class="step_one_s">1</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第一步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">跳出</button>
                            <button  disabled class="c-999 introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  class="introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
                <div class="step_one step_two dn" id="step_two">
                    <div class="step_one_s">2</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第二步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">跳出</button>
                            <button  class="introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  class="introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
                <div class="step_one step_three dn" id="step_three">
                    <div class="step_one_s">3</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第三步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">跳出</button>
                            <button  class="introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  class="introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
                <div class="step_one step_four dn" id="step_four">
                    <div class="step_one_s">4</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第四步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">跳出</button>
                            <button  class="introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  class="introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
                <div class="step_one step_five dn" id="step_five">
                    <div class="step_one_s">5</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第五步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">跳出</button>
                            <button  class="introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  class="introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
                <div class="step_one step_six dn" id="step_six">
                    <div class="step_one_s">6</div>
                    <div class="step_one_arrow"></div>
                    <div class="step_one_con">
                        <p>第六步点这</p>
                        <div class="tr introjs-tooltipbuttons">
                            <button  class="introjs-button introjs-skip" ng-click="vm.hideTip()">完成</button>
                            <button  class="introjs-button introjs-prev" ng-click="vm.prevDiv($event)">上一步</button>
                            <button  disabled class="c-999 introjs-button introjs-next" ng-click="vm.nextDiv($event)">下一步</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--引导end-->
        </div>
    </div>
</div>


<style>
    .container{
        background:#f8f8f8;
    }
    .ipt-txt{
        border: 1px  solid #e1e1e1;
        height:34px;
        box-sizing:border-box;
    }
    .jqrsz-item .item-line .value .ipt-txt{width:407px;}
    .tag_box{width:346px;height:31px;overflow-y:auto;padding:2px;box-sizing:border-box;}

    .tag_s{display:inline-block;color: #46799b; background: #e0eaf1;border:1px solid #eee;height:25px;line-height:25px;padding:0 10px;margin-right:6px;}
    .tagRepeat{
        background: #fff;

    }
    .Wdate{background-position:164px center;}
    /*-----------------------引导页样式-------------------------*/
    .shadow_div{
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        position: fixed;
        background:#000;
        opacity:0.6;filter:alpha(opacity=60);
        z-index:999999;
    }
    .step_one{width:600px;height:40px;position:absolute;top:29px;left: 150px;
        z-index:10000000;
        background:url("../../../images/faq_yd1.png") no-repeat 0px center;
    }
    .step_one_s{
        width: 23px;
        height: 23px;
        line-height: 20px;
        border: 3px solid white;
        background:#be2924;
        border-radius: 50%;
        position: absolute;
        top: -16px;
        left: -16px;
        z-index: 9999999999!important;
        font-size: 13px;
        font-weight: bold;
        color: white;
        text-align: center;
    }
    .step_one_arrow{
        border: 5px solid white;
        content: '';
        position: absolute;
        top: 38px;
        left:5px;
        border-top-color: transparent;
        border-right-color: transparent;
        border-bottom-color: white;
        border-left-color: transparent;
    }
    .step_one_con{
        min-width: 200px;
        max-width: 300px;
        left: 0px;
        top: 48px;
        position: absolute;
        padding: 10px;
        background-color: white;
        border-radius: 3px;
        box-shadow: 0 1px 10px rgba(0,0,0,.4);
    }
    .introjs-tooltipbuttons .introjs-button.c-999{color:#999;}
    .introjs-tooltipbuttons .introjs-button{
        width:58px;
        height:26px;
        position: relative;
        overflow: visible;
        display: inline-block;
        padding: .3em .8em;
        border: 1px solid #d4d4d4;
        margin: 0;
        text-decoration: none;
        text-shadow: 1px 1px 0 #fff;
        color: green;
        white-space: nowrap;
        cursor: pointer;
        background-color: #ccc;
        border:1px solid #eee;
        -webkit-border-radius: .2em;
        -moz-border-radius: .2em;
        border-radius: .2em;
        margin-top: 10px;
    }
    #step_two{background-image:url("../../../images/faq_yd2.png");top:102px;}
    #step_three{background-image:url("../../../images/faq_yd3.png");top:150px;}
    #step_four{background-image:url("../../../images/faq_yd5.png");top:267px;}
    #step_five{background-image:url("../../../images/faq_yd4.png");top:373px;}
    #step_six{background-image:url("../../../images/faq_yd6.png");top:438px;left:224px;}
</style>

